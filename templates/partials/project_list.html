{% for store in stores %}
<div id="project-{{ store.name }}"
    class="group p-3 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-all cursor-pointer relative"
    onclick="loadProjectDetails('{{ store.name }}', '{{ store.display_name }}')">
    <div class="flex justify-between items-start">
        <div>
            <h3 class="font-medium text-gray-800">{{ store.display_name }}</h3>
            <p class="text-xs text-gray-500 mt-1">ID: {{ store.name.split('/')[-1] }}</p>
        </div>
        <button hx-delete="/api/projects/{{ store.name }}" hx-target="#project-list" hx-swap="innerHTML"
            hx-confirm="Are you sure you want to delete this project?"
            class="text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity p-1"
            onclick="event.stopPropagation()">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
            </svg>
        </button>
    </div>
</div>
{% else %}
<div class="text-center py-8 text-gray-500">
    <p>No projects found.</p>
    <p class="text-sm">Create one to get started.</p>
</div>
{% endfor %}

<script>
    function loadProjectDetails(storeId, displayName) {
        htmx.ajax('GET', '/api/projects/' + storeId + '/documents', { target: '#project-details', swap: 'innerHTML' });
    }
</script>